{% extends "base.html" %}
{% block content %}
<h2>My Results (Table Format)</h2>

{% if results_data.exams | length == 0 %}
<p>You do not have any exam records yet.</p>
{% else %}

<!-- Student ID, Class, etc. -->
<p>Student ID (No): {{ results_data.student_id }}</p>
<p>Class: {{ results_data.class_name }}</p>
<p>Total Attempts: {{ results_data.attempts }}</p>

{% for exam in results_data.exams %}
<div style="border:1px solid #999; padding:10px; margin-bottom:15px;">
    <h3>Exam {{ loop.index }} (Exam ID: {{ exam.exam_id }})</h3>
    <p>Start: {{ exam.start_time }} / End: {{ exam.end_time if exam.end_time else "Ongoing" }}</p>

    <table class="table">
        <thead>
            <tr>
                <th>Question Section</th>
                <th>Correct (DS)</th>
                <th>Incorrect (YS)</th>
                <th>Class Avg. (SO)</th>
                <th>School Avg. (OO)</th>
                <th>Score</th>
                <th>Overall Avg.</th>
            </tr>
        </thead>
        <tbody>
            {% for sec in exam.sections_details %}
            <tr>
                <td>Section-{{ sec.section_number }}</td>
                <td>{{ sec.ds }}</td>
                <td>{{ sec.ys }}</td>
                <td>{{ sec.so }}</td>
                <td>{{ sec.oo }}</td>
                <td>{{ sec.notu }}</td>
                <td>{{ sec.ort }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% if exam.pass_fail == "failed" %}
    <p style="color:red;">
        Result: {{ exam.pass_fail }},
        a minimum of 75 must be scored in each section.
    </p>
    {% else %}
    <p style="color:green;">
        Result: {{ exam.pass_fail }}, congratulations!
    </p>
    {% endif %}
</div>
{% endfor %}

{% endif %}

{% endblock %}